import { useEffect, useState } from 'react';
import api from '../lib/api';
import { useNavigate, useParams } from 'react-router-dom';
export default function AddEdit(){ const {id} = useParams(); const nav = useNavigate(); const [title,setTitle]=useState(''); const [content,setContent]=useState(''); useEffect(()=>{ if(id) api.get(`/docs/${id}`).then(r=>{ setTitle(r.data.title); setContent(r.data.content); }); },[id]); async function save(e){ e.preventDefault(); if(id) await api.put(`/docs/${id}`,{title,content}); else{ const {data} = await api.post('/docs',{title,content}); await api.post(`/ai/summarize/${data._id}`); await api.post(`/ai/tags/${data._id}`); await api.post(`/ai/embed/${data._id}`); } nav('/'); } return (<div className="max-w-2xl mx-auto card"><h2>{id? 'Edit':'Add'} Document</h2><form onSubmit={save}><input className="input" placeholder="Title" value={title} onChange={e=>setTitle(e.target.value)} /><textarea className="input" style={{minHeight:200}} placeholder="Content" value={content} onChange={e=>setContent(e.target.value)} /><button className="btn">Save</button></form></div>); }
